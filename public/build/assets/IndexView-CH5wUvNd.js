import{a as F,b as L,Q as G,c as b}from"./SearchBar-DJxEruSr.js";import{Q as H}from"./QBadge-DqKeR-yY.js";import{Q as J}from"./QPage-BBLQyAC7.js";import{f as i,o as l,i as a,t as o,j as d,c as v,w as s,b as t,a as C,d as h,Q as D,e as K,k as W,a0 as X,x as q,v as x,U as Y,E as Z}from"./app-CVo2F_W3.js";import{_ as ee}from"./PageHeader-CeaXU9p-.js";import{u as te}from"./useResourceIndex-OJHyqOIO.js";import{u as ae,C as se}from"./ConfirmationModal-C_oO7QLW.js";import{u as $}from"./useTextTruncate-BXow-7eB.js";import{u as ne}from"./usePollingInterval-ClLiuZEZ.js";import{b as oe,Q as z,a as I,h as N}from"./QMenu-Bv4-7jnn.js";import{Q as le,C as j}from"./ClosePopup-CbTDksMi.js";import{u as ie}from"./index-DZucgB02.js";import"./QSelect-BsTDJULy.js";import"./format-BOf40pHW.js";import"./QDrawer-BZwB_FoC.js";/* empty css               */import"./useFetch-CRpE6LrY.js";const re={key:0},de=["title"],ue=["title"],ce={key:1},me={key:1},_e={__name:"SecurityGroupColumn",props:{row:{type:Object,required:!0}},setup(n){const{truncate:r}=$();return(u,_)=>n.row.security_group?(l(),i("div",re,[a("div",{title:n.row.security_group.group_id},o(d(r)(n.row.security_group.group_id,15)),9,de),a("div",null,[_[0]||(_[0]=a("span",{class:"font-medium me-2 text-gray-600 dark:text-gray-400"},"VPC:",-1)),n.row.security_group.vpc_id?(l(),i("span",{key:0,title:n.row.security_group.vpc_id},o(d(r)(n.row.security_group.vpc_id,10)),9,ue)):(l(),i("span",ce,"N/A"))])])):(l(),i("div",me,[..._[1]||(_[1]=[a("div",null,"N/A",-1)])]))}},fe=["title"],pe={key:1,class:"text-xs"},be={class:"font-medium me-1 text-gray-600 dark:text-gray-400"},ye=["title"],ge={__name:"DBNameColumn",props:{row:{type:Object,required:!0}},setup(n){const{truncate:r}=$();return(u,_)=>(l(),i("div",null,[a("div",null,[n.row.db_name?(l(),i("span",{key:0,title:n.row.db_name},o(d(r)(n.row.db_name,10)),9,fe)):(l(),i("span",pe,"N/A"))]),a("div",null,[a("span",be,o(u.$t("databases.DII"))+": ",1),a("span",{title:n.row.db_instance_identifier},o(d(r)(n.row.db_instance_identifier,10)),9,ye)])]))}},we=["title"],ve={class:"font-medium me-1 text-gray-600 dark:text-gray-400"},he={key:0},xe={key:1,class:"text-xs"},$e={__name:"EngineColumn",props:{row:{type:Object,required:!0}},setup(n){return(r,u)=>(l(),i("div",null,[a("div",null,[a("span",{title:n.row.engine.description},o(n.row.engine.label),9,we)]),a("div",null,[a("span",ve,o(r.$t("databases.version"))+": ",1),n.row.engine_version?(l(),i("span",he,o(n.row.engine_version),1)):(l(),i("span",xe,"N/A"))])]))}},ke=["title"],Qe={class:"font-medium me-1 text-gray-600 dark:text-gray-400"},Ce={class:"font-medium me-1 text-gray-600 dark:text-gray-400"},De={key:0},qe={key:1},ze={__name:"StorageColumn",props:{row:{type:Object,required:!0}},setup(n){return(r,u)=>(l(),i("div",null,[a("div",null,[a("span",{title:n.row.storage_type.description},o(n.row.storage_type.value),9,ke)]),a("div",null,[a("span",Qe,o(r.$t("databases.size"))+": ",1),a("span",null,o(n.row.allocated_storage),1)]),a("div",null,[a("span",Ce,o(r.$t("databases.encryption"))+": ",1),n.row.storage_encrypted?(l(),i("span",De,o(r.$t("active")),1)):(l(),i("span",qe,o(r.$t("inactive")),1))])]))}},Ie={__name:"ActionsColumn",props:{row:{type:Object,required:!0}},emits:["delete"],setup(n,{emit:r}){const u=r,_=f=>{u("delete",f)};return(f,y)=>(l(),v(W,{icon:"sym_r_more_horiz",padding:"xs",size:"sm",unelevated:""},{default:s(()=>[t(oe,{offset:[15,6],"transition-show":"jump-down","transition-hide":"jump-up",class:"q-pa-xs rounded-lg dark:bg-slate-700 shadow-lg border dark:border-none min-w-48"},{default:s(()=>[t(le,{style:{"min-width":"100px"},dense:"",class:"q-pa-xs"},{default:s(()=>[C((l(),v(z,{to:{name:"admin.databases.show",params:{id:n.row.id}},clickable:"",class:"text-gray-600 dark:text-gray-200 rounded-md"},{default:s(()=>[t(I,null,{default:s(()=>[t(N,{class:"flex-nowrap"},{default:s(()=>[t(D,{name:"sym_r_visibility",size:"xs",class:"me-1"}),h(" "+o(f.$t("view_details")),1)]),_:1})]),_:1})]),_:1},8,["to"])),[[j]]),t(K,{class:"q-my-xs"}),C((l(),v(z,{onClick:y[0]||(y[0]=k=>_(n.row)),clickable:"",class:"text-red-600 dark:text-red-400 rounded-md"},{default:s(()=>[t(I,null,{default:s(()=>[t(N,{class:"flex-nowrap"},{default:s(()=>[t(D,{name:"sym_r_delete",size:"xs",class:"me-1"}),h(" "+o(f.$t("delete")),1)]),_:1})]),_:1})]),_:1})),[[j]])]),_:1})]),_:1})]),_:1}))}},Ne={class:"mt-4 bg-white dark:bg-slate-800 p-3 rounded-md"},je={class:"flex items-center justify-between gap-3 mb-3"},Be={key:0},Ve={key:1,class:"text-xs"},Ae={class:"font-medium me-1 text-gray-600 dark:text-gray-400"},Ue={key:0},Se={key:1},Te={class:"mt-2 ms-2 text-xs text-gray-500 dark:text-gray-400"},Oe={class:"font-medium"},Re={class:"list-disc ms-4 mt-1"},nt={__name:"IndexView",setup(n){const{data:r,fetch:u,loading:_,options:f,onRequest:y}=te("admin/rds-databases"),{destroy:k,destroyed:B,destroying:V}=ae("admin/rds-databases"),{t:c}=X(),{truncate:A}=$(),{start:U,stop:S}=ne(()=>{u({filter:g.value,filters:f.filters})},2e4),T=q(()=>[{name:"id",label:c("id"),field:"id",sortable:!0,align:"left"},{name:"db_name",label:c("name"),field:"db_name",align:"left"},{name:"engine",label:c("databases.engine"),field:"engine",align:"left"},{name:"allocated_storage",label:c("databases.storage"),field:"allocated_storage",align:"left",sortable:!0},{name:"security_group",label:c("databases.security_group"),field:"security_group",align:"left"},{name:"availability_zone",label:c("databases.availability_zone"),field:"availability_zone",align:"left"},{name:"status",label:c("status"),field:"status",align:"left"},{name:"created_at",label:c("creation_details"),sortable:!0,field:"created_at",align:"left"},{name:"actions",label:c("actions"),field:"actions",align:"center"}]),O=q(()=>[{name:"created_at",label:c("creation_date"),type:"date"}]),g=x(""),w=x(!1),Q=x(null),R=({search:p,filters:m})=>{u({search:p,filters:m})},M=()=>{y({filter:g.value})},P=p=>{Q.value=p,w.value=!0},E=async()=>{await k(Q.value.id),B.value&&(w.value=!1,u({filter:g.value,filters:f.filters}))};return Y(()=>{ie(U,3e3)()}),Z(()=>{S()}),(p,m)=>(l(),v(J,{class:"q-pa-md"},{default:s(()=>[t(se,{open:w.value,"onUpdate:open":m[0]||(m[0]=e=>w.value=e),title:"databases.delete",icon:"warning",color:"negative",loading:d(V),onConfirm:E,onCancel:m[1]||(m[1]=e=>w.value=!1)},null,8,["open","loading"]),t(ee,{title:"databases.title",subtitle:"databases.admin_subtitle",icon:"sym_r_database"}),a("div",Ne,[a("div",je,[t(F,{onSearch:M,searchValue:g.value,"onUpdate:searchValue":m[2]||(m[2]=e=>g.value=e),class:"md:max-w-sm max-w-full"},null,8,["searchValue"]),t(L,{filters:O.value,onUpdate:R},null,8,["filters"])]),t(G,{columns:T.value,rows:d(r)??[],loading:d(_),pagination:d(f).pagination,"onUpdate:pagination":m[3]||(m[3]=e=>d(f).pagination=e),onRequest:d(y),flat:"","rows-per-page-options":[5,10,20,30,40,50,100]},{"body-cell-db_name":s(e=>[t(b,{props:e},{default:s(()=>[t(ge,{row:e.row},null,8,["row"])]),_:2},1032,["props"])]),"body-cell-engine":s(e=>[t(b,{props:e},{default:s(()=>[t($e,{row:e.row},null,8,["row"])]),_:2},1032,["props"])]),"body-cell-allocated_storage":s(e=>[t(b,{props:e},{default:s(()=>[t(ze,{row:e.row},null,8,["row"])]),_:2},1032,["props"])]),"body-cell-security_group":s(e=>[t(b,{props:e},{default:s(()=>[t(_e,{row:e.row},null,8,["row"])]),_:2},1032,["props"])]),"body-cell-status":s(e=>[t(b,{props:e,title:e.row.status.label},{default:s(()=>[t(H,{"text-color":e.row.status.color,size:"xs",class:"w-fit"},{default:s(()=>[h(o(e.row.status.label),1)]),_:2},1032,["text-color"])]),_:2},1032,["props","title"])]),"body-cell-availability_zone":s(e=>[t(b,{props:e},{default:s(()=>[e.row.availability_zone?(l(),i("div",Be,o(e.row.availability_zone),1)):(l(),i("div",Ve,"N/A"))]),_:2},1032,["props"])]),"body-cell-created_at":s(e=>[t(b,{props:e,title:e.row.created_by?.name??e.row.create_at},{default:s(()=>[h(o(e.row.created_at)+" ",1),a("div",null,[a("span",Ae,o(p.$t("by"))+":",1),e.row.created_by?(l(),i("span",Ue,o(d(A)(e.row.created_by?.name,10)),1)):(l(),i("span",Se,"N/A"))])]),_:2},1032,["props","title"])]),"body-cell-actions":s(e=>[t(b,{props:e},{default:s(()=>[t(Ie,{row:e.row,onDelete:P},null,8,["row"])]),_:2},1032,["props"])]),_:1},8,["columns","rows","loading","pagination","onRequest"])]),a("div",Te,[a("span",Oe,o(p.$t("note"))+":",1),a("ul",Re,[a("li",null,o(p.$t("databases.instance_id_details"))+".",1),a("li",null,o(p.$t("not_available_meaning")),1)])])]),_:1}))}};export{nt as default};
