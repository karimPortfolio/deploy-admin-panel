import{a0 as K,aL as G,a$ as M,v as J,an as C,$ as W}from"./app-CVo2F_W3.js";import{u as X}from"./useFetch-CRpE6LrY.js";function Y(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var D,H;function I(){if(H)return D;H=1;var d=Object.prototype.hasOwnProperty,y=(function(){for(var o=[],e=0;e<256;++e)o.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return o})(),c=function(e){for(var t;e.length;){var i=e.pop();if(t=i.obj[i.prop],Array.isArray(t)){for(var l=[],a=0;a<t.length;++a)typeof t[a]<"u"&&l.push(t[a]);i.obj[i.prop]=l}}return t},b=function(e,t){for(var i=t&&t.plainObjects?Object.create(null):{},l=0;l<e.length;++l)typeof e[l]<"u"&&(i[l]=e[l]);return i},P=function o(e,t,i){if(!t)return e;if(typeof t!="object"){if(Array.isArray(e))e.push(t);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!d.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var l=e;return Array.isArray(e)&&!Array.isArray(t)&&(l=b(e,i)),Array.isArray(e)&&Array.isArray(t)?(t.forEach(function(a,n){if(d.call(e,n)){var p=e[n];p&&typeof p=="object"&&a&&typeof a=="object"?e[n]=o(p,a,i):e.push(a)}else e[n]=a}),e):Object.keys(t).reduce(function(a,n){var p=t[n];return d.call(a,n)?a[n]=o(a[n],p,i):a[n]=p,a},l)},x=function(e,t){return Object.keys(t).reduce(function(i,l){return i[l]=t[l],i},e)},g=function(o){try{return decodeURIComponent(o.replace(/\+/g," "))}catch{return o}},u=function(e){if(e.length===0)return e;for(var t=typeof e=="string"?e:String(e),i="",l=0;l<t.length;++l){var a=t.charCodeAt(l);if(a===45||a===46||a===95||a===126||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122){i+=t.charAt(l);continue}if(a<128){i=i+y[a];continue}if(a<2048){i=i+(y[192|a>>6]+y[128|a&63]);continue}if(a<55296||a>=57344){i=i+(y[224|a>>12]+y[128|a>>6&63]+y[128|a&63]);continue}l+=1,a=65536+((a&1023)<<10|t.charCodeAt(l)&1023),i+=y[240|a>>18]+y[128|a>>12&63]+y[128|a>>6&63]+y[128|a&63]}return i},r=function(e){for(var t=[{obj:{o:e},prop:"o"}],i=[],l=0;l<t.length;++l)for(var a=t[l],n=a.obj[a.prop],p=Object.keys(n),O=0;O<p.length;++O){var m=p[O],h=n[m];typeof h=="object"&&h!==null&&i.indexOf(h)===-1&&(t.push({obj:n,prop:m}),i.push(h))}return c(t)},s=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},f=function(e){return e===null||typeof e>"u"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))};return D={arrayToObject:b,assign:x,compact:r,decode:g,encode:u,isBuffer:f,isRegExp:s,merge:P},D}var L,T;function U(){if(T)return L;T=1;var d=String.prototype.replace,y=/%20/g;return L={default:"RFC3986",formatters:{RFC1738:function(c){return d.call(c,y,"+")},RFC3986:function(c){return String(c)}},RFC1738:"RFC1738",RFC3986:"RFC3986"},L}var E,Q;function Z(){if(Q)return E;Q=1;var d=I(),y=U(),c={brackets:function(f){return f+"[]"},indices:function(f,o){return f+"["+o+"]"},repeat:function(f){return f}},b=Array.isArray,P=Array.prototype.push,x=function(s,f){P.apply(s,b(f)?f:[f])},g=Date.prototype.toISOString,u={delimiter:"&",encode:!0,encoder:d.encode,encodeValuesOnly:!1,serializeDate:function(f){return g.call(f)},skipNulls:!1,strictNullHandling:!1},r=function s(f,o,e,t,i,l,a,n,p,O,m,h){var v=f;if(typeof a=="function"?v=a(o,v):v instanceof Date&&(v=O(v)),v===null){if(t)return l&&!h?l(o,u.encoder):o;v=""}if(typeof v=="string"||typeof v=="number"||typeof v=="boolean"||d.isBuffer(v)){if(l){var A=h?o:l(o,u.encoder);return[m(A)+"="+m(l(v,u.encoder))]}return[m(o)+"="+m(String(v))]}var w=[];if(typeof v>"u")return w;var F;if(b(a))F=a;else{var S=Object.keys(v);F=n?S.sort(n):S}for(var _=0;_<F.length;++_){var j=F[_];i&&v[j]===null||(b(v)?x(w,s(v[j],e(o,j),e,t,i,l,a,n,p,O,m,h)):x(w,s(v[j],o+(p?"."+j:"["+j+"]"),e,t,i,l,a,n,p,O,m,h)))}return w};return E=function(s,f){var o=s,e=f?d.assign({},f):{};if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=typeof e.delimiter>"u"?u.delimiter:e.delimiter,i=typeof e.strictNullHandling=="boolean"?e.strictNullHandling:u.strictNullHandling,l=typeof e.skipNulls=="boolean"?e.skipNulls:u.skipNulls,a=typeof e.encode=="boolean"?e.encode:u.encode,n=typeof e.encoder=="function"?e.encoder:u.encoder,p=typeof e.sort=="function"?e.sort:null,O=typeof e.allowDots>"u"?!1:e.allowDots,m=typeof e.serializeDate=="function"?e.serializeDate:u.serializeDate,h=typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:u.encodeValuesOnly;if(typeof e.format>"u")e.format=y.default;else if(!Object.prototype.hasOwnProperty.call(y.formatters,e.format))throw new TypeError("Unknown format option provided.");var v=y.formatters[e.format],A,w;typeof e.filter=="function"?(w=e.filter,o=w("",o)):b(e.filter)&&(w=e.filter,A=w);var F=[];if(typeof o!="object"||o===null)return"";var S;e.arrayFormat in c?S=e.arrayFormat:"indices"in e?S=e.indices?"indices":"repeat":S="indices";var _=c[S];A||(A=Object.keys(o)),p&&A.sort(p);for(var j=0;j<A.length;++j){var B=A[j];l&&o[B]===null||x(F,r(o[B],B,_,i,l,a?n:null,w,p,O,m,v,h))}var q=F.join(t),V=e.addQueryPrefix===!0?"?":"";return q.length>0?V+q:""},E}var N,$;function k(){if($)return N;$=1;var d=I(),y=Object.prototype.hasOwnProperty,c={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:d.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},b=function(u,r){for(var s={},f=r.ignoreQueryPrefix?u.replace(/^\?/,""):u,o=r.parameterLimit===1/0?void 0:r.parameterLimit,e=f.split(r.delimiter,o),t=0;t<e.length;++t){var i=e[t],l=i.indexOf("]="),a=l===-1?i.indexOf("="):l+1,n,p;a===-1?(n=r.decoder(i,c.decoder),p=r.strictNullHandling?null:""):(n=r.decoder(i.slice(0,a),c.decoder),p=r.decoder(i.slice(a+1),c.decoder)),y.call(s,n)?s[n]=[].concat(s[n]).concat(p):s[n]=p}return s},P=function(g,u,r){for(var s=u,f=g.length-1;f>=0;--f){var o,e=g[f];if(e==="[]"&&r.parseArrays)o=[].concat(s);else{o=r.plainObjects?Object.create(null):{};var t=e.charAt(0)==="["&&e.charAt(e.length-1)==="]"?e.slice(1,-1):e,i=parseInt(t,10);!r.parseArrays&&t===""?o={0:s}:!isNaN(i)&&e!==t&&String(i)===t&&i>=0&&r.parseArrays&&i<=r.arrayLimit?(o=[],o[i]=s):t!=="__proto__"&&(o[t]=s)}s=o}return s},x=function(u,r,s){if(u){var f=s.allowDots?u.replace(/\.([^.[]+)/g,"[$1]"):u,o=/(\[[^[\]]*])/,e=/(\[[^[\]]*])/g,t=o.exec(f),i=t?f.slice(0,t.index):f,l=[];if(i){if(!s.plainObjects&&y.call(Object.prototype,i)&&!s.allowPrototypes)return;l.push(i)}for(var a=0;(t=e.exec(f))!==null&&a<s.depth;){if(a+=1,!s.plainObjects&&y.call(Object.prototype,t[1].slice(1,-1))&&!s.allowPrototypes)return;l.push(t[1])}return t&&l.push("["+f.slice(t.index)+"]"),P(l,r,s)}};return N=function(g,u){var r=u?d.assign({},u):{};if(r.decoder!==null&&r.decoder!==void 0&&typeof r.decoder!="function")throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=r.ignoreQueryPrefix===!0,r.delimiter=typeof r.delimiter=="string"||d.isRegExp(r.delimiter)?r.delimiter:c.delimiter,r.depth=typeof r.depth=="number"?r.depth:c.depth,r.arrayLimit=typeof r.arrayLimit=="number"?r.arrayLimit:c.arrayLimit,r.parseArrays=r.parseArrays!==!1,r.decoder=typeof r.decoder=="function"?r.decoder:c.decoder,r.allowDots=typeof r.allowDots=="boolean"?r.allowDots:c.allowDots,r.plainObjects=typeof r.plainObjects=="boolean"?r.plainObjects:c.plainObjects,r.allowPrototypes=typeof r.allowPrototypes=="boolean"?r.allowPrototypes:c.allowPrototypes,r.parameterLimit=typeof r.parameterLimit=="number"?r.parameterLimit:c.parameterLimit,r.strictNullHandling=typeof r.strictNullHandling=="boolean"?r.strictNullHandling:c.strictNullHandling,g===""||g===null||typeof g>"u")return r.plainObjects?Object.create(null):{};for(var s=typeof g=="string"?b(g,r):g,f=r.plainObjects?Object.create(null):{},o=Object.keys(s),e=0;e<o.length;++e){var t=o[e],i=x(t,s[t],r);f=d.merge(f,i,r)}return d.compact(f)},N}var R,z;function ee(){if(z)return R;z=1;var d=Z(),y=k(),c=U();return R={formats:c,parse:y,stringify:d},R}var re=ee();const te=Y(re);function ie(d,y={},{onSuccess:c,onError:b,onFinally:P,config:x}={}){const g=W(),{t:u}=K(),r=G({search:null,pagination:{sortBy:null,descending:!1,page:1,rowsNumber:0,rowsPerPage:y.pagination?.rowsPerPage??10,from:0,to:0},filters:{},meta:{}});M(()=>{const n=C(y??{});r.pagination.rowsPerPage=n.pagination?.rowsPerPage??r.pagination.rowsPerPage,r.filters=n.filters??r.filters??{}});const s=J(null),{loading:f,initialLoading:o,execute:e}=X({config:x,onSuccess(n){s.value=n.data.data,c&&c(n),n.data.meta&&(r.pagination.rowsPerPage=n.data.meta.per_page,r.pagination.page=n.data.meta.current_page,r.pagination.from=n.data.meta.from,r.pagination.to=n.data.meta.to,r.pagination.rowsNumber=n.data.meta.total,r.meta=n.data.meta)},onError(n){l(n),b&&b(n)},onFinally(){P&&P()}}),t=n=>n.sortBy?`${n.descending?"-":""}${n.sortBy}`:null;async function i({pagination:n,filters:p,filter:O}=r){O??=r.search,n??=r.pagination,p??=r.filters,r.search=O;const m=C(d),h=te.stringify({page:n.page,search:r.search,per_page:n.rowsPerPage,sort:t(n),filter:p});return await e({config:{url:`${m}?${h}`}}).then(v=>(r.filters=p,n.sortBy?(r.pagination.sortBy=n.sortBy,r.pagination.descending=n.descending):(r.pagination.sortBy=null,r.pagination.descending=!1),v))}const l=n=>{if(n.response?.status===401){g.notify({type:"negative",message:u("unauthorized"),caption:u("unauthorized_error_msg"),closeBtn:!0,timeout:3e3});return}if(n.response?.status===403){g.notify({type:"negative",message:u("forbidden"),caption:u("forbidden_error_msg"),closeBtn:!0,timeout:3e3});return}g.notify({type:"negative",message:u("error"),caption:n.response.data.message??u("something_went_wrong_error_msg"),closeBtn:!0,timeout:3e3})};return{options:r,loading:f,initialLoading:o,data:s,onRequest:i,fetch:i}}export{ie as u};
