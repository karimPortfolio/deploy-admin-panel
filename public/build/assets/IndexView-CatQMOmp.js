import{Q as A}from"./QPage-BBLQyAC7.js";import{ad as U,ae as D,c as _,o as w,w as t,b as a,g as S,i as e,t as n,e as r,h as I,k as P,af as v,l as O,u as L,v as k,U as N,j as h}from"./app-CVo2F_W3.js";import{_ as z}from"./PageHeader-CeaXU9p-.js";import{u as j}from"./useResourceUpdate-a58ld08K.js";import{Q as B}from"./QImg-BE0GSjEp.js";import{Q as x}from"./QForm-BsOaUD0C.js";import{a as E}from"./index-CwMOWcUW.js";/* empty css               */import"./useFetch-CRpE6LrY.js";import"./index-DZucgB02.js";const G={class:"font-medium"},H={class:"grid sm:grid-cols-3"},J={class:"text-sm"},K={class:"dark:text-gray-400 text-gray-600 text-xs"},W={class:"mt-5 sm:mt-0 col-span-2 flex gap-5 sm:gap-10 items-center"},X={class:"flex gap-3"},Y={class:"mt-5 grid sm:grid-cols-3"},Z={class:"text-sm"},ee={class:"col-span-2 mt-3 sm:mt-0"},ae={class:"mt-5 grid sm:grid-cols-3"},oe={class:"text-sm"},se={class:"col-span-2 mt-3 sm:mt-0"},le={class:"mt-5 grid sm:grid-cols-3"},te={class:"text-sm"},de={class:"col-span-2 mt-3 sm:mt-0"},ne={class:"mt-6 flex justify-end"},ie={__name:"PersonalInformationsCard",props:U({loading:{type:Boolean},validation:{type:[Object,null]},uploadedPhoto:{type:[String,null]}},{modelValue:{},modelModifiers:{}}),emits:U(["save-details","open-file-selector","reset-image"],["update:modelValue"]),setup(o,{emit:f}){const u=f,l=D(o,"modelValue"),g=()=>{u("save-details")},i=()=>{u("open-file-selector")},d=()=>{u("reset-image")};return(s,m)=>(w(),_(O,null,{default:t(()=>[a(S,{class:"pb-0"},{default:t(()=>[e("div",G,n(s.$t("profile.personal_info")),1)]),_:1}),a(r,{class:"mt-3 mx-4"}),a(S,{class:"mt-0"},{default:t(()=>[a(x,null,{default:t(()=>[e("div",H,[e("div",null,[e("div",J,n(s.$t("profile.photo.label")),1),e("div",K,n(s.$t("profile.photo.subtitle")),1)]),e("div",W,[o.uploadedPhoto?(w(),_(I,{key:0,class:"w-20 h-20"},{default:t(()=>[a(B,{src:o.uploadedPhoto},null,8,["src"])]),_:1})):(w(),_(I,{key:1,class:"w-20 h-20"},{default:t(()=>[a(B,{src:l.value?.photo??"/src/img/avatar.png"},null,8,["src"])]),_:1})),e("div",X,[a(P,{label:s.$q.screen.lt.sm?s.$t("profile.photo.change"):s.$t("profile.photo.change_photo"),color:"primary",unelevated:"",onClick:i},null,8,["label"]),a(P,{label:s.$q.screen.lt.sm?s.$t("profile.photo.remove"):s.$t("profile.photo.remove_photo"),color:"red",outline:"",unelevated:"",disable:!o.uploadedPhoto,onClick:d},null,8,["label","disable"])])])]),a(r,{class:"mt-4"}),e("div",Y,[e("div",null,[e("div",Z,n(s.$t("name")),1)]),e("div",ee,[a(v,{modelValue:l.value.name,"onUpdate:modelValue":m[0]||(m[0]=c=>l.value.name=c),"error-message":o.validation.name?.[0],error:"name"in o.validation,outlined:"","hide-bottom-space":"",dense:""},null,8,["modelValue","error-message","error"])])]),a(r,{class:"mt-4"}),e("div",ae,[e("div",null,[e("div",oe,n(s.$t("users.company_name")),1)]),e("div",se,[a(v,{modelValue:l.value.company_name,"onUpdate:modelValue":m[1]||(m[1]=c=>l.value.company_name=c),"error-message":o.validation.company_name?.[0],error:"company_name"in o.validation,outlined:"","hide-bottom-space":"",dense:""},null,8,["modelValue","error-message","error"])])]),a(r,{class:"mt-5"}),e("div",le,[e("div",null,[e("div",te,n(s.$t("users.email")),1)]),e("div",de,[a(v,{modelValue:l.value.email,"onUpdate:modelValue":m[2]||(m[2]=c=>l.value.email=c),"error-message":o.validation.email?.[0],error:"email"in o.validation,outlined:"","hide-bottom-space":"",dense:""},null,8,["modelValue","error-message","error"])])]),a(r,{class:"mt-5"}),e("div",ne,[a(P,{label:s.$t("save"),icon:"sym_r_save",color:"primary",unelevated:"",loading:o.loading,onClick:g},null,8,["label","loading"])])]),_:1})]),_:1})]),_:1}))}},re={class:"font-medium"},me={class:"mt-1 grid sm:grid-cols-3"},ue={class:"text-sm"},ce={class:"col-span-2 mt-3 sm:mt-0"},pe={class:"mt-5 grid sm:grid-cols-3"},ve={class:"text-sm"},fe={class:"col-span-2 mt-3 sm:mt-0"},ge={class:"mt-5 grid sm:grid-cols-3"},he={class:"text-sm"},_e={class:"col-span-2 mt-3 sm:mt-0"},we={class:"mt-6 flex justify-end"},Ve={__name:"UpdatePasswordCard",props:U({loading:{type:Boolean},validation:{type:[Object,null]}},{modelValue:{},modelModifiers:{}}),emits:U(["save-password"],["update:modelValue"]),setup(o,{emit:f}){const u=f,l=D(o,"modelValue"),g=()=>{u("save-password")};return(i,d)=>(w(),_(O,{class:"mt-4"},{default:t(()=>[a(S,{class:"pb-0"},{default:t(()=>[e("div",re,n(i.$t("profile.password.label")),1)]),_:1}),a(r,{class:"mt-3 mx-4"}),a(S,{class:"mt-0"},{default:t(()=>[a(x,null,{default:t(()=>[e("div",me,[e("div",null,[e("div",ue,n(i.$t("profile.password.current_password")),1)]),e("div",ce,[a(v,{type:"password",modelValue:l.value.current_password,"onUpdate:modelValue":d[0]||(d[0]=s=>l.value.current_password=s),"error-message":o.validation.current_password?.[0],error:"current_password"in o.validation,outlined:"","hide-bottom-space":"",dense:""},null,8,["modelValue","error-message","error"])])]),a(r,{class:"mt-5"}),e("div",pe,[e("div",null,[e("div",ve,n(i.$t("profile.password.new_password")),1)]),e("div",fe,[a(v,{type:"password",modelValue:l.value.password,"onUpdate:modelValue":d[1]||(d[1]=s=>l.value.password=s),"error-message":o.validation.password?.[0],error:"password"in o.validation,outlined:"","hide-bottom-space":"",dense:""},null,8,["modelValue","error-message","error"])])]),a(r,{class:"mt-5"}),e("div",ge,[e("div",null,[e("div",he,n(i.$t("profile.password.confirm_password")),1)]),e("div",_e,[a(v,{type:"password",modelValue:l.value.password_confirmation,"onUpdate:modelValue":d[2]||(d[2]=s=>l.value.password_confirmation=s),"error-message":o.validation.password_confirmation?.[0],error:"password_confirmation"in o.validation,outlined:"","hide-bottom-space":"",dense:""},null,8,["modelValue","error-message","error"])])]),a(r,{class:"mt-5"}),e("div",we,[a(P,{label:i.$t("save"),icon:"sym_r_save",color:"primary",unelevated:"",loading:o.loading,onClick:g},null,8,["label","loading"])])]),_:1})]),_:1})]),_:1}))}},$e={class:"mt-4"},ye={class:"mt-4"},De={__name:"IndexView",setup(o){const{update:f,updating:u,validation:l}=j("user/profile-information",{config:{method:"POST",headers:{"Content-Type":"multipart/form-data"}}}),{update:g,updating:i,validation:d}=j("user/password"),{open:s,reset:m,onChange:c}=E({accept:"image/*",multiple:!1}),{user:V,fetchProfile:F}=L(),p=k({name:"",email:""}),$=k({}),Q=k(null);c(y=>{!y||y.length===0||(p.value.photo=y[0],Q.value=URL.createObjectURL(p.value.photo))});const M=()=>{m(),Q.value=null,p.value.photo=null},R=async()=>{await f(null,{...p.value,_method:"PUT"}),T()},q=async()=>{await g(null,$.value),$.value={}},T=()=>{F()};return N(()=>{p.value={name:V.name,email:V.email,company_name:V.company_name,photo:V.photo}}),(y,b)=>(w(),_(A,{class:"q-pa-md"},{default:t(()=>[a(z,{title:"profile.title",subtitle:"profile.subtitle",icon:"sym_r_person"}),e("div",$e,[a(ie,{modelValue:p.value,"onUpdate:modelValue":b[0]||(b[0]=C=>p.value=C),loading:h(u),validation:h(l),uploadedPhoto:Q.value,onSaveDetails:R,onOpenFileSelector:h(s),onResetImage:M},null,8,["modelValue","loading","validation","uploadedPhoto","onOpenFileSelector"])]),e("div",ye,[a(Ve,{modelValue:$.value,"onUpdate:modelValue":b[1]||(b[1]=C=>$.value=C),loading:h(i),validation:h(d),onSavePassword:q},null,8,["modelValue","loading","validation"])])]),_:1}))}};export{De as default};
