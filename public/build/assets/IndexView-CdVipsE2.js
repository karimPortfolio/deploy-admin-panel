import{a as W,b as X,Q as Y,c as x}from"./SearchBar-DJxEruSr.js";import{Q as Z}from"./QPage-BBLQyAC7.js";import{c as y,o as _,w as t,b as e,a as z,d as m,Q as D,t as o,e as k,k as ee,u as te,x as q,D as se,aa as ae,l as T,g as Q,i as a,f as C,a1 as oe,j as l,a3 as B,a4 as ie,a0 as le,v}from"./app-CVo2F_W3.js";import{_ as ne}from"./PageHeader-CeaXU9p-.js";import{u as re}from"./useResourceIndex-OJHyqOIO.js";import{u as de,C as ce}from"./ConfirmationModal-C_oO7QLW.js";import{u as L}from"./useTextTruncate-BXow-7eB.js";import{b as ue,Q as I,a as R,h as U}from"./QMenu-Bv4-7jnn.js";import{Q as me,C as A}from"./ClosePopup-CbTDksMi.js";import{Q as _e}from"./QBadge-DqKeR-yY.js";import{_ as pe}from"./ShowModal-G5KzTtC5.js";import{u as fe}from"./useResourceShow-DPDX-8vq.js";import"./QSelect-BsTDJULy.js";import"./format-BOf40pHW.js";import"./QDrawer-BZwB_FoC.js";/* empty css               */import"./useFetch-CRpE6LrY.js";import"./QSpace-92-bbKT5.js";import"./QInnerLoading-CiQDGj4V.js";const ge={__name:"ActionsColumn",props:{row:{type:Object,required:!0}},emits:["delete","show-details"],setup(b,{emit:r}){const d=r,w=n=>{d("delete",n)},f=n=>{d("show-details",n)};return(n,c)=>(_(),y(ee,{icon:"sym_r_more_horiz",padding:"xs",size:"sm",unelevated:""},{default:t(()=>[e(ue,{offset:[15,6],"transition-show":"jump-down","transition-hide":"jump-up",class:"q-pa-xs rounded-lg dark:bg-slate-700 shadow-lg border dark:border-none min-w-48"},{default:t(()=>[e(me,{style:{"min-width":"100px"},dense:"",class:"q-pa-xs"},{default:t(()=>[z((_(),y(I,{onClick:c[0]||(c[0]=i=>f(b.row)),clickable:"",class:"text-gray-600 dark:text-gray-200 rounded-md"},{default:t(()=>[e(R,null,{default:t(()=>[e(U,{class:"flex-nowrap"},{default:t(()=>[e(D,{name:"sym_r_visibility",size:"xs",class:"me-1"}),m(" "+o(n.$t("view_details")),1)]),_:1})]),_:1})]),_:1})),[[A]]),e(k,{class:"q-my-xs"}),z((_(),y(I,{onClick:c[1]||(c[1]=i=>w(b.row)),clickable:"",class:"text-red-600 dark:text-red-400 rounded-md"},{default:t(()=>[e(R,null,{default:t(()=>[e(U,{class:"flex-nowrap"},{default:t(()=>[e(D,{name:"sym_r_delete",size:"xs",class:"me-1"}),m(" "+o(n.$t("delete")),1)]),_:1})]),_:1})]),_:1})),[[A]])]),_:1})]),_:1})]),_:1}))}},ve={class:"bg-primary-50 flex justify-center items-center w-fit p-3 rounded-full"},ye={class:"text-h6 text-center mb-4"},be={class:"grid grid-cols-2 justify-between mt-5"},we={class:"text-subtitle2"},he={class:"text-gray-700 dark:text-gray-400 text-end"},xe={class:"grid grid-cols-2 justify-between mt-3"},ke={class:"text-subtitle2"},$e={class:"text-gray-700 dark:text-gray-400 text-end"},Qe={class:"grid grid-cols-2 justify-between mt-3"},Ce={class:"text-subtitle2"},De={class:"text-gray-700 dark:text-gray-400 text-end"},Se={class:"text-sm"},je={class:"text-primary"},qe={class:"grid grid-cols-2 justify-between mt-3"},Ve={class:"text-subtitle2"},Ne={class:"text-gray-700 dark:text-gray-400 text-end"},ze={class:"mt-5"},Te={class:"grid grid-cols-2 gap-x-3 justify-between items-center"},Be={class:"p-2 w-fit rounded-md bg-primary-50"},Ie={key:0,class:"text-sm font-medium"},Re={key:1,class:"text-sm font-medium"},Ue={class:"w-fit"},Ae={__name:"ShowDetailsView",props:{id:{type:[String,Number]}},setup(b){const r=b,{data:d,fetch:w,loading:f}=fe("admin/security-groups"),{truncate:n}=L();te();const c=q(()=>d.value.servers?d.value.servers.map(i=>({id:i.id,instance_id:n(i.instance_id,25),status:{label:i.status.label,color:i.status.color}})):[]);return se(()=>r.id,i=>{i&&w(i)}),(i,h)=>{const S=ae("router-link");return _(),y(pe,{title:"security_groups.security_group_details",loading:l(f)},{content:t(()=>[e(T,{class:"shadow-none bg-transparent"},{default:t(()=>[e(Q,{class:"p-0 flex justify-center items-center"},{default:t(()=>[a("div",ve,[e(D,{name:"sym_r_security",size:"xl",color:"primary"})])]),_:1}),e(Q,{class:"q-pa-md"},{default:t(()=>[a("div",ye,o(l(d)?.group_id),1),a("div",be,[a("div",we,o(i.$t("name")),1),a("div",he,o(l(d)?.name),1)]),e(k,{class:"mt-2"}),a("div",xe,[a("div",ke,o(i.$t("vpc_id")),1),a("div",$e,o(l(d)?.vpc_id||"N/A"),1)]),e(k,{class:"mt-2"}),a("div",Qe,[a("div",Ce,o(i.$t("creation_details")),1),a("div",De,[m(o(l(d)?.created_at)+" ",1),a("div",Se,[m(o(i.$t("by"))+" ",1),a("span",je,o(l(d)?.created_by?.name),1)])])]),e(k,{class:"mt-2"}),a("div",qe,[a("div",Ve,o(i.$t("description")),1),a("div",Ne,o(l(d)?.description||"N/A"),1)]),c.value&&c.value.length?(_(),C(B,{key:0},[e(k,{class:"mt-2"}),a("div",ze,o(i.$t("assigned_servers")),1),a("div",Te,[(_(!0),C(B,null,ie(c.value,p=>(_(),y(S,{key:p.id,to:{name:"admin.servers.show",params:{id:p.id}}},{default:t(()=>[e(T,{class:"w-full flex flex-nowrap gap-2 items-center p-3 border mt-3"},{default:t(()=>[e(Q,{class:"p-0"},{default:t(()=>[a("div",Be,[e(D,{name:"sym_r_host",size:"sm",class:"text-primary"})])]),_:1}),e(Q,{class:"p-0"},{default:t(()=>[p.instance_id&&p.instance_id!==null?(_(),C("div",Ie,o(p.instance_id),1)):(_(),C("div",Re," N/A ")),a("div",Ue,[e(_e,{"text-color":p.status.color,size:"xs",class:"q-mt-xs"},{default:t(()=>[m(o(p.status.label),1)]),_:2},1032,["text-color"])])]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"]))),128))])],64)):oe("",!0)]),_:1})]),_:1})]),default:t(()=>[h[0]||(h[0]=m(" > ",-1))]),_:1},8,["loading"])}}},Le={class:"mt-4 bg-white dark:bg-slate-800 p-3 rounded-md"},Me={class:"flex items-center justify-between gap-3 mb-3"},Fe={class:"block"},Ge={class:"font-medium"},dt={__name:"IndexView",setup(b){const{t:r}=le(),d=q(()=>[{name:"id",label:r("id"),field:"id",align:"left",sortable:!0},{name:"group_id",label:r("security_groups.group_id"),field:"group_id",align:"left",sortable:!0},{name:"name",label:r("name"),field:"name",align:"left",sortable:!0},{name:"vpc_id",label:r("vpc_id"),field:"vpc_id",align:"left",sortable:!0},{name:"servers_count",label:r("assigned_servers"),field:"servers_count",align:"center",sortable:!0},{name:"created_at",label:r("creation_details"),field:"created_at",align:"left",sortable:!0},{label:r("actions"),name:"actions",field:"actions",align:"center"}]),w=q(()=>[{name:"vpc_id",label:r("vpc_id"),type:"relation",resource:"vpcs",optionLabel:"vpc_id",optionValue:"vpc_id"},{name:"created_at",label:r("creation_date"),type:"date"}]),f=v("");v(!1);const n=v(!1),c=v(!1),i=v(null),h=v(null),{data:S,loading:p,fetch:V,options:j,onRequest:N}=re("admin/security-groups"),{destroy:M,destroyed:F,destroying:G}=de("admin/security-groups"),{truncate:$}=L(),P=()=>{N({filter:f.value})};function E({search:g,filters:u}){V({filter:g,filters:u})}const O=g=>{h.value=g,c.value=!0},H=g=>{n.value=!0,i.value=g},J=async()=>{await M(i.value.id),F.value&&K()},K=()=>{n.value=!1,V({filter:f.value,filters:j.filters})};return(g,u)=>(_(),y(Z,{class:"q-pa-md"},{default:t(()=>[e(Ae,{open:c.value,"onUpdate:open":u[0]||(u[0]=s=>c.value=s),id:h.value?.id},null,8,["open","id"]),e(ce,{open:n.value,"onUpdate:open":u[1]||(u[1]=s=>n.value=s),title:"security_groups.delete",icon:"warning",color:"negative",loading:l(G),onConfirm:J,onCancel:u[2]||(u[2]=s=>n.value=!1)},null,8,["open","loading"]),e(ne,{title:"security_groups.title",subtitle:"security_groups.admin_subtitle",icon:"security"}),a("div",Le,[a("div",Me,[e(W,{onSearch:P,searchValue:f.value,"onUpdate:searchValue":u[3]||(u[3]=s=>f.value=s),class:"md:max-w-sm max-w-full"},null,8,["searchValue"]),e(X,{filters:w.value,onUpdate:E},null,8,["filters"])]),e(Y,{columns:d.value,rows:l(S)??[],loading:l(p),pagination:l(j).pagination,"onUpdate:pagination":u[4]||(u[4]=s=>l(j).pagination=s),onRequest:l(N),flat:"","rows-per-page-options":[5,10,20,30,40,50,100]},{"body-cell-servers_count":t(s=>[e(x,{props:s},{default:t(()=>[m(o(s.row.servers_count),1)]),_:2},1032,["props"])]),"body-cell-group_id":t(s=>[e(x,{props:s,title:s.row.group_id},{default:t(()=>[m(o(l($)(s.row.group_id,20)),1)]),_:2},1032,["props","title"])]),"body-cell-vpc_id":t(s=>[e(x,{props:s,title:s.row.vpc_id},{default:t(()=>[m(o(l($)(s.row.vpc_id,20)),1)]),_:2},1032,["props","title"])]),"body-cell-created_at":t(s=>[e(x,{props:s,title:s.row.created_at},{default:t(()=>[m(o(l($)(s.row.created_at,20))+" ",1),a("small",Fe,[m(o(g.$t("by"))+": ",1),a("span",Ge,o(l($)(s.row.created_by?.name,20)),1)])]),_:2},1032,["props","title"])]),"body-cell-actions":t(s=>[e(x,{props:s},{default:t(()=>[e(ge,{row:s.row,onDelete:H,onShowDetails:O},null,8,["row"])]),_:2},1032,["props"])]),_:1},8,["columns","rows","loading","pagination","onRequest"])])]),_:1}))}};export{dt as default};
