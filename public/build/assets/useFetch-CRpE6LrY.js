import{v as w,aK as O}from"./app-CVo2F_W3.js";function r(e){return e&&typeof e=="object"&&!Array.isArray(e)}function c(e,...o){if(!o.length)return e;const a=o.shift();if(r(e)&&r(a))for(const s in a)r(a[s])&&!(a[s]instanceof File)?(e[s]||Object.assign(e,{[s]:{}}),c(e[s],a[s])):Object.assign(e,{[s]:a[s]});return c(e,...o)}function d({onSuccess:e,onError:o,onFinally:a,config:s}={}){const i=w(!1),t=w({}),h=s,u=e,f=o,v=a;async function p({onSuccess:y,onError:b,onFinally:m,config:l}={config:{}}){return i.value=!0,t.value={},l=c(structuredClone(h||{}),l||{}),O(l).then(async n=>(u&&await Promise.resolve(u(n)),y&&await Promise.resolve(y(n)),n)).catch(async n=>{throw n.response&&n.response.status===422&&(t.value=n.response.data.errors),f&&await Promise.resolve(f(n)),b&&await Promise.resolve(b(n)),n}).finally(async()=>{i.value=!1,v&&await Promise.resolve(v()),m&&await Promise.resolve(m())})}return{validation:t,loading:i,execute:p}}export{c as m,d as u};
