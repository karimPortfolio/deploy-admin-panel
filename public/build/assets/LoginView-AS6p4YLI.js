import{v as i,u as Q,a0 as V,D as $,U as C,c as S,w as t,ai as I,$ as q,ab as z,aa as U,o as B,b as a,i as n,l as D,g as f,t as d,af as g,Q as _,aC as M,d as N,k as L,aK as j}from"./app-CVo2F_W3.js";import{Q as A}from"./QSpinnerOval-BNKl9G_f.js";import{Q as O}from"./QForm-BsOaUD0C.js";import{Q as P}from"./QPage-BBLQyAC7.js";import{b as R,a as T}from"./QLayout-kQp8uDh8.js";import"./QImg-BE0GSjEp.js";import"./QMenu-Bv4-7jnn.js";import"./QSelect-BsTDJULy.js";import{_ as F}from"./AuthPageHeader-DsVm23dk.js";import{u as w}from"./index-CwMOWcUW.js";/* empty css               */import"./format-BOf40pHW.js";import"./index-DZucgB02.js";const J={class:"w-full min-h-screen dark:bg-slate-900 sm:bg-gray-50 flex"},K={class:"sm:q-pa-xl flex-1 flex flex-col"},G={class:"text-h4 font-bold text-primary mb-2"},H={class:"text-gray-600 text-sm"},W={class:"flex justify-between items-center mb-2"},ie={__name:"LoginView",setup(X){const o=i({remember:!1}),m=i(!1),r=i({}),y=I(),u=q(),p=Q(),{t:c}=V(),b=w(()=>{const e=localStorage.getItem("dark");if(e==="auto"){u.dark.set(e);return}const s=JSON.parse(e)??"auto";u.dark.set(s)}),v=w(()=>{const e=localStorage.getItem("language")??"en";z.global.locale.value=e}),x=async()=>{try{await j.get("http://deploy-admin-panel.test/sanctum/csrf-cookie")}catch(e){u.notify({message:c("error"),caption:e.response.data.message??c("something_went_wrong_error_msg"),type:"negative"})}},h=async()=>{m.value=!0;try{await x();const e=decodeURIComponent(y.query.redirect_to);await p.login(o.value,e)}catch(e){e.response?.status===422&&(r.value=e.response.data.errors)}finally{m.value=!1}};return $(()=>p.errorMessages,e=>{e&&(r.value=e)}),C(()=>{b(),v()}),(e,s)=>{const k=U("router-link");return B(),S(R,null,{default:t(()=>[a(T,null,{default:t(()=>[a(P,null,{default:t(()=>[n("div",J,[a(F),n("div",K,[a(D,{class:"flex flex-col justify-center items-center my-auto sm:shadow-lg shadow-none sm:rounded-xl rounded-none sm:max-w-md max-w-full mx-auto w-full"},{default:t(()=>[a(f,{class:"w-full text-center pt-8"},{default:t(()=>[n("h1",G,d(e.$t("login_page_title")),1),n("p",H,d(e.$t("login_page_subtitle")),1)]),_:1}),a(f,{class:"w-full px-8 pt-4 pb-6"},{default:t(()=>[a(O,{onSubmit:s[3]||(s[3]=l=>l.preventDefault()),class:"q-gutter-y-sm"},{default:t(()=>[a(g,{modelValue:o.value.email,"onUpdate:modelValue":s[0]||(s[0]=l=>o.value.email=l),label:e.$t("users.email"),"lazy-rules":"","error-message":r.value.email?.[0],error:"email"in r.value,outlined:"",class:"rounded-lg"},{prepend:t(()=>[a(_,{name:"email",color:"primary"})]),_:1},8,["modelValue","label","error-message","error"]),a(g,{type:"password",modelValue:o.value.password,"onUpdate:modelValue":s[1]||(s[1]=l=>o.value.password=l),label:e.$t("users.password"),"lazy-rules":"","error-message":r.value.password?.[0],error:"password"in r.value,outlined:"",class:"rounded-lg"},{prepend:t(()=>[a(_,{name:"lock",color:"primary"})]),_:1},8,["modelValue","label","error-message","error"]),n("div",W,[a(M,{modelValue:o.value.remember,"onUpdate:modelValue":s[2]||(s[2]=l=>o.value.remember=l),size:"sm",label:e.$t("remember_me"),class:"text-gray-600 flex flex-nowrap"},null,8,["modelValue","label"]),a(k,{to:{name:"auth.forgot.password"},class:"text-sm text-primary hover:text-primary-dark"},{default:t(()=>[N(d(e.$t("forget_password"))+"? ",1)]),_:1})]),a(L,{label:e.$t("login"),onClick:h,loading:m.value,class:"w-full bg-primary text-white q-py-md rounded-lg",unelevated:""},{loading:t(()=>[a(A)]),_:1},8,["label","loading"])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})]),_:1})}}};export{ie as default};
