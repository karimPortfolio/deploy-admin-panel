import{a0 as C,$ as h,an as S,ad as g,ae as b,c as p,o as y,w as o,b as a,l as V,g as Q,i as B,a as k,a1 as q,d as x,Q as _,t as $,j as T,k as f,ak as D,a5 as I,ao as L,ap as M}from"./app-CVo2F_W3.js";import{m as v,u as N}from"./useFetch-CRpE6LrY.js";import{Q as z}from"./QSpace-92-bbKT5.js";import{Q as F,a as P}from"./QInnerLoading-CiQDGj4V.js";import{C as j}from"./ClosePopup-CbTDksMi.js";import{u as A}from"./useTextTruncate-BXow-7eB.js";function W(e,{onSuccess:l,onError:r,onFinally:s,config:n}={}){const i=h(),{t}=C();n=v({method:"POST"},n);const{loading:m,validation:d,execute:w}=N({config:n,onSuccess(){i.notify({type:"positive",message:t("success"),caption:t("resource_created_success_msg"),position:"bottom-right",timeout:3e3}),l&&l()},onError(u){i.notify({type:"negative",message:t("error"),caption:u.response?.data?.message??t("something_went_wrong_error_msg"),closeBtn:!0,timeout:3e3}),r&&r(u)},onFinally(){s&&s()}});return{create:async(u,c={})=>(c=v({url:S(e),data:u},c),await w({config:c})),creating:m,validation:d}}const O={class:"font-medium text-lg"},X={__name:"FormModal",props:g({title:{type:String,required:!0},loading:{type:Boolean,default:!1},form:{type:String,required:!0},icon:{type:String},actionIcon:{type:String,default:"sym_r_add"},modalLoading:{type:Boolean,default:!1}},{open:{},openModifiers:{}}),emits:g(["close"],["update:open"]),setup(e,{emit:l}){const r=l,s=b(e,"open"),{truncate:n}=A(),i=()=>{r("close")};return(t,m)=>(y(),p(M,{modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=d=>s.value=d)},{default:o(()=>[a(V,{class:"p-4 rounded-lg w-full md:max-w-2xl"},{default:o(()=>[a(Q,{class:"row items-center q-pt-none q-mt-none"},{default:o(()=>[B("div",O,[e.icon?(y(),p(_,{key:0,name:e.icon,class:"q-mr-sm",size:"sm"},null,8,["name"])):q("",!0),x(" "+$(T(n)(t.$t(e.title),40)),1)]),a(z),k(a(f,{icon:"close",flat:"",round:"",dense:""},null,512),[[j]])]),_:1}),a(Q,null,{default:o(()=>[D(t.$slots,"form",{class:I({invisible:e.modalLoading})})]),_:3}),a(L,{align:"right",class:"mt-4"},{default:o(()=>[a(f,{flat:"",onClick:i,label:t.$t("cancel")},null,8,["label"]),a(f,{unelevated:"",label:t.$t("save"),form:e.form,type:"submit",icon:"sym_r_save",color:"primary",loading:e.loading},null,8,["label","form","loading"])]),_:1}),a(F,{showing:e.modalLoading},{default:o(()=>[a(P,{color:"primary",size:"40px"})]),_:1},8,["showing"])]),_:3})]),_:3},8,["modelValue"]))}};export{X as _,W as u};
