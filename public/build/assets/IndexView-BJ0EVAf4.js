import{a as Z,b as ee,Q as te,c as D}from"./SearchBar-DJxEruSr.js";import{Q as se}from"./QPage-BBLQyAC7.js";import{c as k,o as _,w as t,b as e,a as I,d as h,Q as j,t as i,e as Q,k as ae,ad as oe,ae as le,v as x,f as $,a6 as ie,af as N,j as l,x as q,D as ne,aa as re,l as z,g as S,i as o,a1 as de,a3 as R,a4 as ue,a0 as ce}from"./app-CVo2F_W3.js";import{_ as me}from"./PageHeader-CeaXU9p-.js";import{u as pe}from"./useResourceIndex-OJHyqOIO.js";import{u as _e,C as fe}from"./ConfirmationModal-C_oO7QLW.js";import{u as F}from"./useTextTruncate-BXow-7eB.js";import{b as ge,Q as T,a as B,h as L}from"./QMenu-Bv4-7jnn.js";import{Q as ve,C as A}from"./ClosePopup-CbTDksMi.js";import{Q as ye}from"./QForm-BsOaUD0C.js";import{u as be,_ as we}from"./FormModal-3_KjRAQA.js";import{Q as xe}from"./QBadge-DqKeR-yY.js";import{_ as he}from"./ShowModal-G5KzTtC5.js";import{u as Ce}from"./useResourceShow-DPDX-8vq.js";import"./QSelect-BsTDJULy.js";import"./format-BOf40pHW.js";import"./QDrawer-BZwB_FoC.js";/* empty css               */import"./useFetch-CRpE6LrY.js";import"./QSpace-92-bbKT5.js";import"./QInnerLoading-CiQDGj4V.js";const ke={__name:"ActionsColumn",props:{row:{type:Object,required:!0}},emits:["delete"],setup(v,{emit:u}){const n=u,y=c=>{n("delete",c)},r=c=>{n("show-details",c)};return(c,d)=>(_(),k(ae,{icon:"sym_r_more_horiz",padding:"xs",size:"sm",unelevated:""},{default:t(()=>[e(ge,{offset:[15,6],"transition-show":"jump-down","transition-hide":"jump-up",class:"q-pa-xs rounded-lg dark:bg-slate-700 shadow-lg border dark:border-none min-w-48"},{default:t(()=>[e(ve,{style:{"min-width":"100px"},dense:"",class:"q-pa-xs"},{default:t(()=>[I((_(),k(T,{onClick:d[0]||(d[0]=s=>r(v.row)),clickable:"",class:"text-gray-600 dark:text-gray-200 rounded-md"},{default:t(()=>[e(B,null,{default:t(()=>[e(L,{class:"flex-nowrap"},{default:t(()=>[e(j,{name:"sym_r_visibility",size:"xs",class:"me-1"}),h(" "+i(c.$t("view_details")),1)]),_:1})]),_:1})]),_:1})),[[A]]),e(Q,{class:"q-my-xs"}),I((_(),k(T,{onClick:d[1]||(d[1]=s=>y(v.row)),clickable:"",class:"text-red-600 dark:text-red-400 rounded-md"},{default:t(()=>[e(B,null,{default:t(()=>[e(L,{class:"flex-nowrap"},{default:t(()=>[e(j,{name:"sym_r_delete",size:"xs",class:"me-1"}),h(" "+i(c.$t("delete")),1)]),_:1})]),_:1})]),_:1})),[[A]])]),_:1})]),_:1})]),_:1}))}},Qe={__name:"CreateView",props:{open:{},openModifiers:{}},emits:oe(["created"],["update:open"]),setup(v,{emit:u}){const n=le(v,"open"),y=u,r=x({}),{create:c,creating:d,validation:s}=be("security-groups"),b=async()=>{await c(r.value),w(),y("created")},w=()=>{r.value={},s.value={},n.value=!1};return(p,g)=>(_(),$("template",null,[e(we,{open:n.value,"onUpdate:open":g[2]||(g[2]=f=>n.value=f),title:"security_groups.create",form:"security-group-form",onClose:w,loading:l(d)},{form:t(()=>[e(ye,{id:"security-group-form",onSubmit:ie(b,["prevent","self"]),class:"q-gutter-md"},{default:t(()=>[e(N,{dense:"",modelValue:r.value.name,"onUpdate:modelValue":g[0]||(g[0]=f=>r.value.name=f),label:p.$t("name"),"error-message":l(s).name?.[0],error:"name"in l(s),outlined:"","hide-bottom-space":""},null,8,["modelValue","label","error-message","error"]),e(N,{type:"textarea",dense:"",modelValue:r.value.description,"onUpdate:modelValue":g[1]||(g[1]=f=>r.value.description=f),label:p.$t("description"),"error-message":l(s).description?.[0],error:"description"in l(s),outlined:"","hide-bottom-space":""},null,8,["modelValue","label","error-message","error"])]),_:1})]),_:1},8,["open","loading"])]))}},$e={class:"bg-primary-50 flex justify-center items-center w-fit p-3 rounded-full"},Ve={class:"text-h6 text-center mb-4"},De={class:"grid grid-cols-2 justify-between mt-5"},Se={class:"text-subtitle2"},je={class:"text-gray-700 dark:text-gray-400 text-end"},qe={class:"grid grid-cols-2 justify-between mt-3"},Ue={class:"text-subtitle2"},Me={class:"text-gray-700 dark:text-gray-400 text-end"},Ie={class:"grid grid-cols-2 justify-between mt-3"},Ne={class:"text-subtitle2"},ze={class:"text-gray-700 dark:text-gray-400 text-end"},Re={class:"grid grid-cols-2 justify-between mt-3"},Te={class:"text-subtitle2"},Be={class:"text-gray-700 dark:text-gray-400 text-end"},Le={class:"mt-5"},Ae={class:"grid grid-cols-2 gap-x-3 justify-between items-center"},Fe={class:"p-2 w-fit rounded-md bg-primary-50"},Ge={key:0,class:"text-sm font-medium"},Pe={key:1,class:"text-sm font-medium"},Ee={class:"w-fit"},Oe={__name:"ShowDetailsView",props:{id:{type:[String,Number]}},setup(v){const u=v,{data:n,fetch:y,loading:r}=Ce("security-groups"),{truncate:c}=F(),d=q(()=>n.value.servers?n.value.servers.map(s=>({id:s.id,instance_id:c(s.instance_id,25),status:{label:s.status.label,color:s.status.color}})):[]);return ne(()=>u.id,s=>{s&&y(s)}),(s,b)=>{const w=re("router-link");return _(),k(he,{title:"security_groups.security_group_details",loading:l(r)},{content:t(()=>[e(z,{class:"shadow-none bg-transparent"},{default:t(()=>[e(S,{class:"p-0 flex justify-center items-center"},{default:t(()=>[o("div",$e,[e(j,{name:"sym_r_security",size:"xl",color:"primary"})])]),_:1}),e(S,{class:"q-pa-md"},{default:t(()=>[o("div",Ve,i(l(n)?.group_id),1),o("div",De,[o("div",Se,i(s.$t("name")),1),o("div",je,i(l(n)?.name),1)]),e(Q,{class:"mt-2"}),o("div",qe,[o("div",Ue,i(s.$t("vpc_id")),1),o("div",Me,i(l(n)?.vpc_id||"N/A"),1)]),e(Q,{class:"mt-2"}),o("div",Ie,[o("div",Ne,i(s.$t("creation_date")),1),o("div",ze,i(l(n)?.created_at),1)]),e(Q,{class:"mt-2"}),o("div",Re,[o("div",Te,i(s.$t("description")),1),o("div",Be,i(l(n)?.description||"N/A"),1)]),d.value&&d.value.length?(_(),$(R,{key:0},[e(Q,{class:"mt-2"}),o("div",Le,i(s.$t("assigned_servers")),1),o("div",Ae,[(_(!0),$(R,null,ue(d.value,p=>(_(),k(w,{key:p.id,to:{name:"servers.show",params:{id:p.id}}},{default:t(()=>[e(z,{class:"w-full flex flex-nowrap gap-2 items-center p-3 border mt-3"},{default:t(()=>[e(S,{class:"p-0"},{default:t(()=>[o("div",Fe,[e(j,{name:"sym_r_host",size:"sm",class:"text-primary"})])]),_:1}),e(S,{class:"p-0"},{default:t(()=>[p.instance_id&&p.instance_id!==null?(_(),$("div",Ge,i(p.instance_id),1)):(_(),$("div",Pe," N/A ")),o("div",Ee,[e(xe,{"text-color":p.status.color,size:"xs",class:"q-mt-xs"},{default:t(()=>[h(i(p.status.label),1)]),_:2},1032,["text-color"])])]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"]))),128))])],64)):de("",!0)]),_:1})]),_:1})]),default:t(()=>[b[0]||(b[0]=h(" > ",-1))]),_:1},8,["loading"])}}},He={class:"mt-4 bg-white dark:bg-slate-800 p-3 rounded-md"},Je={class:"flex items-center justify-between gap-3 mb-3"},gt={__name:"IndexView",setup(v){const{t:u}=ce(),n=q(()=>[{name:"id",label:u("id"),field:"id",align:"left",sortable:!0},{name:"group_id",label:u("security_groups.group_id"),field:"group_id",align:"left",sortable:!0},{name:"name",label:u("name"),field:"name",align:"left",sortable:!0},{name:"vpc_id",label:u("vpc_id"),field:"vpc_id",align:"left",sortable:!0},{name:"servers_count",label:u("assigned_servers"),field:"servers_count",align:"center",sortable:!0},{name:"created_at",label:u("creation_details"),field:"created_at",align:"left",sortable:!0},{label:u("actions"),name:"actions",field:"actions",align:"center"}]),y=q(()=>[{name:"vpc_id",label:u("vpc_id"),type:"relation",resource:"vpcs",optionLabel:"vpc_id",optionValue:"vpc_id"},{name:"created_at",label:u("creation_date"),type:"date"}]),r=x(""),c=x(!1),d=x(!1),s=x(!1),b=x(null),w=x(null),{data:p,loading:g,fetch:f,options:V,onRequest:U}=pe("security-groups"),{destroy:G,destroyed:P,destroying:E}=_e("security-groups"),{truncate:M}=F(),O=()=>{U({filter:r.value})};function H({search:C,filters:m}){f({filter:C,filters:m})}const J=C=>{w.value=C,s.value=!0},K=C=>{d.value=!0,b.value=C},W=async()=>{await G(b.value.id),P.value&&Y()},X=()=>{c.value=!1,f({filter:r.value,filters:V.filters})},Y=()=>{d.value=!1,f({filter:r.value,filters:V.filters})};return(C,m)=>(_(),k(se,{class:"q-pa-md"},{default:t(()=>[e(Qe,{open:c.value,"onUpdate:open":m[0]||(m[0]=a=>c.value=a),onCreated:X},null,8,["open"]),e(Oe,{open:s.value,"onUpdate:open":m[1]||(m[1]=a=>s.value=a),id:w.value?.id},null,8,["open","id"]),e(fe,{open:d.value,"onUpdate:open":m[2]||(m[2]=a=>d.value=a),title:"security_groups.delete",icon:"warning",color:"negative",loading:l(E),onConfirm:W,onCancel:m[3]||(m[3]=a=>d.value=!1)},null,8,["open","loading"]),e(me,{title:"security_groups.title",subtitle:"security_groups.subtitle",icon:"security",actionLabel:"security_groups.create",actionIcon:"sym_r_add",action:()=>c.value=!0},null,8,["action"]),o("div",He,[o("div",Je,[e(Z,{onSearch:O,searchValue:r.value,"onUpdate:searchValue":m[4]||(m[4]=a=>r.value=a),class:"md:max-w-sm max-w-full"},null,8,["searchValue"]),e(ee,{filters:y.value,onUpdate:H},null,8,["filters"])]),e(te,{columns:n.value,rows:l(p)??[],loading:l(g),pagination:l(V).pagination,"onUpdate:pagination":m[5]||(m[5]=a=>l(V).pagination=a),onRequest:l(U),flat:"","rows-per-page-options":[5,10,20,30,40,50,100]},{"body-cell-servers_count":t(a=>[e(D,{props:a},{default:t(()=>[h(i(a.row.servers_count),1)]),_:2},1032,["props"])]),"body-cell-group_id":t(a=>[e(D,{props:a,title:a.row.group_id},{default:t(()=>[h(i(l(M)(a.row.group_id,30)),1)]),_:2},1032,["props","title"])]),"body-cell-vpc_id":t(a=>[e(D,{props:a,title:a.row.vpc_id},{default:t(()=>[h(i(l(M)(a.row.vpc_id,30)),1)]),_:2},1032,["props","title"])]),"body-cell-actions":t(a=>[e(D,{props:a},{default:t(()=>[e(ke,{row:a.row,onDelete:K,onShowDetails:J},null,8,["row"])]),_:2},1032,["props"])]),_:1},8,["columns","rows","loading","pagination","onRequest"])])]),_:1}))}};export{gt as default};
